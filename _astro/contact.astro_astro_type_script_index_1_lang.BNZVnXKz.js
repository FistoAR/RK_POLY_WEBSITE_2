import{g as r,S as y}from"./ScrollTrigger.C0eCJjti.js";r.registerPlugin(y);let S=[];function H(){const o=document.getElementById("contactForm");if(!o)return;const c=o.dataset.formsubmitEmail,g=o.dataset.siteUrl||window.location.origin,l=o.dataset.isProd==="true",u=document.getElementById("successMessage"),h=document.getElementById("errorMessage"),p=document.getElementById("errorText"),m=document.getElementById("activationNotice"),b=document.getElementById("activationEmail"),v=document.getElementById("submitBtn"),w=document.getElementById("btnText"),B=document.getElementById("btnArrow"),k=document.getElementById("btnSpinner"),f=document.getElementById("charCounter"),C=document.getElementById("message"),$=document.getElementById("sendAnotherBtn"),_=document.getElementById("retryBtn");if(!v||!c){console.error("Form configuration missing");return}if(C&&f){const e=()=>{const t=C.value.length,a=1e3;f.textContent=`(${t}/${a})`,t>900?f.className="text-orange-500 text-xs font-normal ml-2":t>800?f.className="text-yellow-500 text-xs font-normal ml-2":f.className="text-gray-400 text-xs font-normal ml-2"};C.addEventListener("input",e),e()}function O(e,t){const a={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"},s=document.createElement("div");s.className=`fixed top-4 right-4 z-50 ${a[t]} text-white px-6 py-3 rounded-lg shadow-lg transform translate-x-full`,s.textContent=e,document.body.appendChild(s),r.to(s,{x:0,duration:.4,ease:"power2.out",onComplete:()=>{r.to(s,{x:"100%",delay:3,duration:.4,ease:"power2.in",onComplete:()=>s.remove()})}})}const q=new URLSearchParams(window.location.search);q.get("activated")==="true"&&(O("Email activated successfully! You can now send messages.","success"),window.history.replaceState({},document.title,window.location.pathname)),q.get("success")==="true"&&(T(),window.history.replaceState({},document.title,window.location.pathname));const P=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),j=e=>e?/^[+]?[\d\s\-\(\)]{10,}$/.test(e.replace(/\s/g,"")):!0,E=(e,t)=>{const a=document.getElementById(e),s=a?.parentElement?.parentElement?.querySelector(".field-error");if(a&&s){a.classList.add("border-red-400","focus:border-red-500","focus:ring-red-500/10"),a.classList.remove("border-gray-200","focus:border-[#0A3E49]","focus:ring-[#0A3E49]/10"),s.innerHTML=`
          <svg class="w-3.5 h-3.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          ${t}
        `,s.classList.remove("hidden"),r.fromTo(a,{x:-8},{x:0,duration:.5,ease:"elastic.out(1, 0.3)"});const i=()=>{a.classList.remove("border-red-400","focus:border-red-500","focus:ring-red-500/10"),a.classList.add("border-gray-200","focus:border-[#0A3E49]","focus:ring-[#0A3E49]/10"),s.classList.add("hidden"),a.removeEventListener("input",i),a.removeEventListener("change",i)};a.addEventListener("input",i),a.addEventListener("change",i)}},D=()=>{o.querySelectorAll(".field-error").forEach(e=>{e.classList.add("hidden")}),o.querySelectorAll(".border-red-400").forEach(e=>{e.classList.remove("border-red-400","focus:border-red-500","focus:ring-red-500/10"),e.classList.add("border-gray-200","focus:border-[#0A3E49]","focus:ring-[#0A3E49]/10")})},V=()=>{D();const e=document.getElementById("name")?.value.trim(),t=document.getElementById("email")?.value.trim(),a=document.getElementById("subject")?.value,s=document.getElementById("message")?.value.trim(),i=document.getElementById("phone")?.value.trim();let d=!0,n=null;return(!e||e.length<2)&&(E("name","Please enter your full name (at least 2 characters)"),n||(n="name"),d=!1),t?P(t)||(E("email","Please enter a valid email address"),n||(n="email"),d=!1):(E("email","Please enter your email address"),n||(n="email"),d=!1),i&&!j(i)&&(E("phone","Please enter a valid phone number"),n||(n="phone"),d=!1),a||(E("subject","Please select a subject"),n||(n="subject"),d=!1),(!s||s.length<10)&&(E("message","Please enter a message (at least 10 characters)"),n||(n="message"),d=!1),n&&document.getElementById(n)?.focus(),d},A=e=>{e?(v.disabled=!0,w&&(w.textContent="Sending..."),B?.classList.add("hidden"),k?.classList.remove("hidden"),v.classList.add("cursor-not-allowed")):(v.disabled=!1,w&&(w.textContent="Send Message"),B?.classList.remove("hidden"),k?.classList.add("hidden"),v.classList.remove("cursor-not-allowed"))},L=()=>{u?.classList.add("hidden"),h?.classList.add("hidden"),m?.classList.add("hidden")};function T(){L(),u?.classList.remove("hidden"),o&&o.reset(),f&&(f.textContent="(0/1000)",f.className="text-gray-400 text-xs font-normal ml-2"),r.fromTo(u,{y:-20,opacity:0,scale:.95},{y:0,opacity:1,scale:1,duration:.5,ease:"back.out(1.7)"}),setTimeout(()=>{u?.scrollIntoView({behavior:"smooth",block:"center"})},100),z()}const x=(e,t=!1)=>{L(),h?.classList.remove("hidden"),p&&(p.textContent=e),t&&m&&b&&(m.classList.remove("hidden"),b.textContent=c||"",r.fromTo(m,{y:-10,opacity:0},{y:0,opacity:1,duration:.4,delay:.2})),r.fromTo(h,{y:-20,opacity:0,scale:.95},{y:0,opacity:1,scale:1,duration:.5,ease:"back.out(1.7)"}),setTimeout(()=>{h?.scrollIntoView({behavior:"smooth",block:"center"})},100)},z=()=>{const e=u?.parentElement;if(!e||!u)return;const t=["#22c55e","#0A3E49","#fbbf24","#a855f7","#ec4899"],a=25;for(let s=0;s<a;s++){const i=document.createElement("div");i.className="success-particle pointer-events-none",i.style.cssText=`
          position: absolute;
          width: ${6+Math.random()*6}px;
          height: ${6+Math.random()*6}px;
          background: ${t[Math.floor(Math.random()*t.length)]};
          border-radius: 50%;
          z-index: 60;
        `,e.style.position="relative",e.appendChild(i);const d=u.getBoundingClientRect(),n=e.getBoundingClientRect(),N=d.left-n.left+d.width/2,R=d.top-n.top;r.set(i,{x:N,y:R,scale:0}),r.to(i,{x:N+(Math.random()-.5)*300,y:R-50-Math.random()*150,scale:1,opacity:0,duration:.8+Math.random()*.4,ease:"power2.out",delay:Math.random()*.2,onComplete:()=>i.remove()})}};o.addEventListener("submit",async e=>{if(e.preventDefault(),!!V()){L(),A(!0);try{const t=new FormData(o);t.append("_subject",`New Contact Form Submission - ${t.get("inquiry_type")||"RK Poly Products"}`),t.append("_captcha","false"),t.append("_template","table"),t.append("_autoresponse",`Thank you for contacting RK Poly Products!

We have received your message regarding "${t.get("inquiry_type")}".

Our team will review your inquiry and get back to you within 24 hours.

In the meantime, feel free to:
- Call us: +91 8048976748
- WhatsApp: +91 8048976748
- Visit our website: https://rkpolyproducts.com

Best regards,
RK Poly Products Team`),t.append("_source",window.location.href),t.append("_timestamp",new Date().toISOString()),t.append("_next",`${g}/contact?success=true`);const a=`https://formsubmit.co/ajax/${c}`;console.log("[Contact Form] Submitting to:",a),console.log("[Contact Form] Environment:",l?"Production":"Development");const s=await fetch(a,{method:"POST",body:t,headers:{Accept:"application/json"}});console.log("[Contact Form] Response status:",s.status);const i=await s.text();console.log("[Contact Form] Response:",i.substring(0,200));let d;try{d=JSON.parse(i)}catch{if(i.toLowerCase().includes("activate")||i.toLowerCase().includes("confirm your email")){console.log("[Contact Form] Activation required"),x("This email needs to be activated for this domain. Check your inbox for the activation link.",!0);return}if(s.ok){T();return}throw new Error("Invalid response from server")}if(s.ok&&d.success){console.log("[Contact Form] Success!"),T();try{const n=JSON.parse(localStorage.getItem("rkpoly_submissions")||"[]");n.push({date:new Date().toISOString(),subject:t.get("inquiry_type")}),localStorage.setItem("rkpoly_submissions",JSON.stringify(n.slice(-10)))}catch{}}else{const n=d.message||"Failed to send message";n.toLowerCase().includes("activate")||n.toLowerCase().includes("confirm")||s.status===403||s.status===401?x("Email not activated for this domain. Please check your inbox for the activation email.",!0):x(n)}}catch(t){console.error("[Contact Form] Error:",t),t instanceof TypeError&&t.message.includes("fetch")?x("Network error. Please check your internet connection and try again."):t instanceof Error&&t.message.includes("timeout")?x("Request timed out. Please try again."):x("Failed to send message. Please try again or contact us directly via phone or email.")}finally{A(!1)}}}),$?.addEventListener("click",()=>{L(),o&&o.reset(),f&&(f.textContent="(0/1000)",f.className="text-gray-400 text-xs font-normal ml-2"),document.getElementById("name")?.focus(),o.scrollIntoView({behavior:"smooth",block:"start"})}),_?.addEventListener("click",()=>{L(),v?.focus()});const F=document.getElementById("name"),M=document.getElementById("email");F?.addEventListener("blur",()=>{const e=F.value.trim();e&&e.length<2&&E("name","Name must be at least 2 characters")}),M?.addEventListener("blur",()=>{const e=M.value.trim();e&&!P(e)&&E("email","Please enter a valid email address")})}function U(){const o=document.querySelectorAll(".faq-item");o.forEach(c=>{const g=c.querySelector(".faq-trigger"),l=c.querySelector(".faq-content"),u=c.querySelector(".faq-icon");!g||!l||!u||g.addEventListener("click",()=>{const h=!l.classList.contains("hidden");if(o.forEach(p=>{if(p!==c){const m=p.querySelector(".faq-content"),b=p.querySelector(".faq-icon");m?.classList.add("hidden"),r.to(b,{rotation:0,duration:.3})}}),h)r.to(l,{height:0,opacity:0,duration:.3,ease:"power2.inOut",onComplete:()=>{l.classList.add("hidden"),l.style.height=""}}),r.to(u,{rotation:0,duration:.3});else{l.classList.remove("hidden");const p=l.scrollHeight;r.fromTo(l,{height:0,opacity:0},{height:p,opacity:1,duration:.3,ease:"power2.inOut"}),r.to(u,{rotation:180,duration:.3})}})})}function J(){S.forEach(m=>m.kill()),S=[];const o=m=>{S.push(m)};r.timeline({defaults:{ease:"power3.out"}}).fromTo(".hero-breadcrumb",{y:-20,opacity:0},{y:0,opacity:1,duration:.5}).fromTo(".hero-title",{y:40,opacity:0},{y:0,opacity:1,duration:.7},"-=0.3").fromTo(".hero-subtitle",{y:30,opacity:0},{y:0,opacity:1,duration:.6},"-=0.4").fromTo(".hero-buttons",{y:20,opacity:0},{y:0,opacity:1,duration:.5},"-=0.3");const g=y.create({trigger:"#contact-section",start:"top 80%",onEnter:()=>{r.fromTo(".contact-form-wrapper",{x:-50,opacity:0},{x:0,opacity:1,duration:.8,ease:"power3.out"})},once:!0});o(g);const l=y.create({trigger:".contact-form-wrapper",start:"top 75%",onEnter:()=>{r.fromTo(".form-field",{y:25,opacity:0},{y:0,opacity:1,duration:.5,stagger:.08,ease:"power3.out"})},once:!0});o(l);const u=y.create({trigger:"#contact-section",start:"top 80%",onEnter:()=>{r.fromTo(".contact-card",{x:50,opacity:0},{x:0,opacity:1,duration:.6,stagger:.1,ease:"power3.out"})},once:!0});o(u);const h=y.create({trigger:"#map-section",start:"top 80%",onEnter:()=>{r.fromTo(".map-header",{y:30,opacity:0},{y:0,opacity:1,duration:.6,ease:"power3.out"}),r.fromTo(".map-container",{y:50,opacity:0,scale:.98},{y:0,opacity:1,scale:1,duration:.8,delay:.2,ease:"power3.out"})},once:!0});o(h);const p=y.create({trigger:".faq-item",start:"top 85%",onEnter:()=>{r.fromTo(".faq-item",{y:30,opacity:0},{y:0,opacity:1,duration:.5,stagger:.1,ease:"power3.out"})},once:!0});o(p),r.utils.toArray(".hero-blur").forEach((m,b)=>{const v=y.create({trigger:m,start:"top bottom",end:"bottom top",scrub:1,onUpdate:w=>{r.set(m,{y:-40*(b+1)*w.progress})}});o(v)}),y.refresh()}function K(){document.querySelectorAll(".contact-card").forEach(c=>{c.addEventListener("mouseenter",()=>{r.to(c,{y:-4,duration:.3,ease:"power2.out"})}),c.addEventListener("mouseleave",()=>{r.to(c,{y:0,duration:.3,ease:"power2.out"})})})}function W(){document.querySelectorAll('a[href^="#"]').forEach(o=>{o.addEventListener("click",function(c){c.preventDefault();const g=this.getAttribute("href");if(!g||g==="#")return;const l=document.querySelector(g);l&&l.scrollIntoView({behavior:"smooth",block:"start"})})})}function I(){requestAnimationFrame(()=>{H(),U(),J(),K(),W(),console.log("[Contact Page] Initialized successfully")})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",I):I();document.addEventListener("astro:page-load",I);document.addEventListener("astro:before-swap",()=>{S.forEach(o=>o.kill()),S=[]});document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&y.refresh()});
